
echo "updating node modules"

echo "updating react-native-image-picker [single pick update to CATEGORY_OPENABLE from ACTION_PICK]"
sed -i '' "s/libraryIntent = new Intent(Intent.ACTION_PICK);/libraryIntent = new Intent(Intent.ACTION_GET_CONTENT) ;libraryIntent.addCategory(Intent.CATEGORY_OPENABLE);/g" node_modules/react-native-image-picker/android/src/main/java/com/imagepicker/ImagePickerModule.java

echo "updating react-native-image-picker [add mime type support from js level]"
sed -i '' 's/libraryIntent.setType("image\/[*]");/libraryIntent.setType("image\/*") ;if(options.hasKey("mimeTypesAllowed")) {  String[] mimeTypes = new String[options.getArray("mimeTypesAllowed").size()]; for (int i = 0; i <  options.getArray("mimeTypesAllowed").size(); i++) { mimeTypes[i] =  options.getArray("mimeTypesAllowed").getString(i); } libraryIntent.putExtra(Intent.EXTRA_MIME_TYPES, mimeTypes); }/g' node_modules/react-native-image-picker/android/src/main/java/com/imagepicker/ImagePickerModule.java
